<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S-Engine æˆé•·è²»ç”¨ è©¦æ¼”å™¨ v2.0</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Noto+Serif+KR:wght@600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      min-height: 100vh;
      background: linear-gradient(180deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
      color: #e6edf3;
      font-family: 'Noto Sans KR', sans-serif;
      padding: 20px;
      font-size: 14px;
    }
    
    .container { max-width: 1200px; margin: 0 auto; }
    
    header { text-align: center; margin-bottom: 30px; }
    
    h1 {
      font-family: 'Noto Serif KR', serif;
      font-size: 2rem;
      background: linear-gradient(135deg, #ffd700 0%, #ff6b35 50%, #ffd700 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }
    
    .subtitle { color: #8b949e; font-size: 0.9rem; }
    
    .main-grid {
      display: grid;
      grid-template-columns: 350px 1fr;
      gap: 20px;
    }
    
    @media (max-width: 900px) {
      .main-grid { grid-template-columns: 1fr; }
    }
    
    /* íŒ¨ë„ ìŠ¤íƒ€ì¼ */
    .panel {
      background: rgba(22, 27, 34, 0.8);
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 20px;
    }
    
    .panel-title {
      font-family: 'Noto Serif KR', serif;
      font-size: 1.1rem;
      color: #ffd700;
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid #30363d;
    }
    
    /* ì…ë ¥ ì„¹ì…˜ */
    .input-group {
      margin-bottom: 16px;
    }
    
    .input-group label {
      display: block;
      font-size: 0.85rem;
      color: #8b949e;
      margin-bottom: 6px;
    }
    
    .input-group select,
    .input-group input {
      width: 100%;
      padding: 10px 12px;
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      color: #e6edf3;
      font-size: 0.95rem;
    }
    
    .input-group select:focus,
    .input-group input:focus {
      outline: none;
      border-color: #58a6ff;
    }
    
    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    /* ì²´í¬ë°•ìŠ¤ */
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      cursor: pointer;
    }
    
    .checkbox-group input {
      width: 18px;
      height: 18px;
      accent-color: #ffd700;
    }
    
    /* ë²„íŠ¼ */
    .btn {
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 12px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #238636, #2ea043);
      color: #fff;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(46, 160, 67, 0.3);
    }
    
    /* ê²°ê³¼ ì˜ì—­ */
    .results-area { display: flex; flex-direction: column; gap: 16px; }
    
    .result-card {
      background: rgba(13, 17, 23, 0.6);
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 16px;
    }
    
    .result-card h3 {
      font-size: 0.9rem;
      color: #8b949e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .result-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .result-item {
      background: rgba(48, 54, 61, 0.5);
      border-radius: 8px;
      padding: 12px;
      text-align: center;
    }
    
    .result-item .label {
      font-size: 0.75rem;
      color: #8b949e;
      margin-bottom: 4px;
    }
    
    .result-item .value {
      font-size: 1.3rem;
      font-weight: bold;
    }
    
    .result-item .unit {
      font-size: 0.8rem;
      color: #8b949e;
      margin-left: 4px;
    }
    
    .value.gold { color: #ffd700; }
    .value.blue { color: #58a6ff; }
    .value.green { color: #3fb950; }
    .value.red { color: #f85149; }
    .value.purple { color: #a371f7; }
    
    /* ìƒì„¸ í…Œì´ë¸” */
    .detail-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    
    .detail-table th,
    .detail-table td {
      padding: 10px 8px;
      text-align: left;
      border-bottom: 1px solid #21262d;
    }
    
    .detail-table th {
      color: #8b949e;
      font-weight: 500;
    }
    
    .detail-table td { color: #e6edf3; }
    
    .detail-table tr:hover td {
      background: rgba(56, 139, 253, 0.1);
    }
    
    .detail-table .highlight {
      color: #ffd700;
      font-weight: bold;
    }
    
    .detail-table .sub {
      color: #8b949e;
      font-size: 0.8rem;
    }
    
    /* ê²½ë¡œ í‘œì‹œ */
    .path-display {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    
    .path-node {
      padding: 6px 14px;
      background: linear-gradient(135deg, #21262d, #30363d);
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    .path-node.current { background: linear-gradient(135deg, #1f6feb, #388bfd); }
    .path-node.target { background: linear-gradient(135deg, #238636, #3fb950); }
    
    .path-arrow { color: #484f58; font-size: 1.2rem; }
    
    /* ìš”ì•½ ë°•ìŠ¤ */
    .summary-box {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 107, 53, 0.1));
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      padding: 16px;
      text-align: center;
    }
    
    .summary-title {
      font-size: 0.9rem;
      color: #ffd700;
      margin-bottom: 8px;
    }
    
    .summary-value {
      font-size: 2rem;
      font-weight: bold;
      color: #fff;
    }
    
    .summary-sub {
      font-size: 0.85rem;
      color: #8b949e;
      margin-top: 4px;
    }
    
    /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
    .progress-section { margin-top: 20px; }
    
    .progress-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #8b949e;
      margin-bottom: 6px;
    }
    
    .progress-bar {
      height: 8px;
      background: #21262d;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.5s ease;
    }
    
    .progress-fill.neigong { background: linear-gradient(90deg, #1f6feb, #58a6ff); }
    .progress-fill.simdeuk { background: linear-gradient(90deg, #a371f7, #d2a8ff); }
    .progress-fill.cost { background: linear-gradient(90deg, #ffd700, #ff6b35); }
    
    footer {
      text-align: center;
      margin-top: 30px;
      color: #484f58;
      font-size: 0.8rem;
    }
    
    .info-tooltip {
      display: inline-block;
      width: 16px;
      height: 16px;
      background: #30363d;
      border-radius: 50%;
      text-align: center;
      line-height: 16px;
      font-size: 0.7rem;
      color: #8b949e;
      cursor: help;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>S-Engine æˆé•·è²»ç”¨ è©¦æ¼”å™¨</h1>
      <p class="subtitle">v2.0 - ë¬´ê³µ ì¶”ê°€ (ê²€ìˆ /ê¶Œê°ìˆ /ë³´ë²•)</p>
    </header>
    
    <div class="main-grid">
      <!-- ì…ë ¥ íŒ¨ë„ -->
      <div class="panel">
        <h2 class="panel-title">âš™ï¸ ì„¤ì •</h2>
        
        <div class="input-group">
          <label>ğŸ“ í˜„ì¬ ê²½ì§€</label>
          <select id="current-gyeongji">
            <option value="ì‚¼ë¥˜">ì‚¼ë¥˜ (ì…ë¬¸)</option>
            <option value="ì´ë¥˜">ì´ë¥˜ (10ë…„)</option>
            <option value="ì¼ë¥˜" selected>ì¼ë¥˜ (30ë…„)</option>
            <option value="ì ˆì •">ì ˆì • (60ë…„)</option>
            <option value="ì´ˆì ˆì •">ì´ˆì ˆì • (120ë…„)</option>
            <option value="í™”ê²½">í™”ê²½ (180ë…„)</option>
            <option value="í˜„ê²½">í˜„ê²½ (240ë…„)</option>
            <option value="ìƒì‚¬ê²½">ìƒì‚¬ê²½ (300ë…„)</option>
          </select>
        </div>
        
        <div class="input-group">
          <label>ğŸ¯ ëª©í‘œ ê²½ì§€</label>
          <select id="target-gyeongji">
            <option value="ì´ë¥˜">ì´ë¥˜</option>
            <option value="ì¼ë¥˜">ì¼ë¥˜</option>
            <option value="ì ˆì •">ì ˆì •</option>
            <option value="ì´ˆì ˆì •" selected>ì´ˆì ˆì •</option>
            <option value="í™”ê²½">í™”ê²½</option>
            <option value="í˜„ê²½">í˜„ê²½</option>
            <option value="ìƒì‚¬ê²½">ìƒì‚¬ê²½</option>
            <option value="ìì—°ê²½">ìì—°ê²½</option>
          </select>
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
        
        <h3 style="font-size: 0.9rem; color: #8b949e; margin-bottom: 12px;">ğŸ“œ ì‹¬ë²• ì„¤ì •</h3>
        
        <div class="input-row">
          <div class="input-group">
            <label>í˜„ì¬ ì‹¬ë²•</label>
            <select id="current-simbeop">
              <option value="ì—†ìŒ">ì—†ìŒ (ì‹ ê·œ)</option>
              <optgroup label="ê¸°ì´ˆê¸‰ (2%/íšŒ)">
                <option value="ì‚¼ì¬ì‹¬ë²•">ì‚¼ì¬ì‹¬ë²• (ì¶•ê¸° 10)</option>
                <option value="ê¸°ì´ˆì‹¬ë²•" selected>ê¸°ì´ˆì‹¬ë²• (ì¶•ê¸° 20)</option>
                <option value="ê¸°ë³¸ì‹¬ë²•">ê¸°ë³¸ì‹¬ë²• (ì¶•ê¸° 30)</option>
              </optgroup>
              <optgroup label="ì¤‘ê¸‰ (1%/íšŒ)">
                <option value="ì‹¬í™”ì‹¬ë²•">ì‹¬í™”ì‹¬ë²• (ì¶•ê¸° 40)</option>
              </optgroup>
              <optgroup label="ê³ ê¸‰ (0.5%/íšŒ)">
                <option value="ë¹„ì „ì‹¬ë²•">ë¹„ì „ì‹¬ë²• (ì¶•ê¸° 70)</option>
                <option value="ëª…ìš´ì‹¬ë²•">ëª…ìš´ì‹¬ë²• (ì¶•ê¸° 110)</option>
              </optgroup>
              <optgroup label="ì ˆì„¸ (0.3%/íšŒ)">
                <option value="ë‹¬ë§ˆì‹¬ê³µ">ë‹¬ë§ˆì‹¬ê³µ (ì¶•ê¸° 120)</option>
                <option value="ì²œë§ˆì‹¬ê³µ">ì²œë§ˆì‹¬ê³µ (ì¶•ê¸° 130)</option>
              </optgroup>
            </select>
          </div>
          <div class="input-group">
            <label>í˜„ì¬ ìˆ™ë ¨ë„</label>
            <select id="current-simbeop-mastery">
              <option value="0">0% (ë¯¸ìŠµë“)</option>
              <option value="100" selected>1ë‹¨ê³„ (100%)</option>
              <option value="200">2ë‹¨ê³„ (200%)</option>
              <option value="300">3ë‹¨ê³„ (300%)</option>
              <option value="400">4ë‹¨ê³„ (400%)</option>
              <option value="500">5ë‹¨ê³„ (500%)</option>
              <option value="600">6ë‹¨ê³„ (600%)</option>
              <option value="700">7ë‹¨ê³„ (700%)</option>
              <option value="800">8ë‹¨ê³„ (800%)</option>
              <option value="900">9ë‹¨ê³„ (900%)</option>
            </select>
          </div>
        </div>
        
        <div class="input-row">
          <div class="input-group">
            <label>ğŸ¯ ëª©í‘œ ì‹¬ë²•</label>
            <select id="target-simbeop">
              <option value="í˜„ì¬ìœ ì§€">í˜„ì¬ ìœ ì§€</option>
              <optgroup label="ê¸°ì´ˆê¸‰ (2%/íšŒ)">
                <option value="ì‚¼ì¬ì‹¬ë²•">ì‚¼ì¬ì‹¬ë²• (ì¶•ê¸° 10)</option>
                <option value="ê¸°ì´ˆì‹¬ë²•">ê¸°ì´ˆì‹¬ë²• (ì¶•ê¸° 20)</option>
                <option value="ê¸°ë³¸ì‹¬ë²•">ê¸°ë³¸ì‹¬ë²• (ì¶•ê¸° 30)</option>
              </optgroup>
              <optgroup label="ì¤‘ê¸‰ (1%/íšŒ)">
                <option value="ì‹¬í™”ì‹¬ë²•" selected>ì‹¬í™”ì‹¬ë²• (ì¶•ê¸° 40)</option>
              </optgroup>
              <optgroup label="ê³ ê¸‰ (0.5%/íšŒ)">
                <option value="ë¹„ì „ì‹¬ë²•">ë¹„ì „ì‹¬ë²• (ì¶•ê¸° 70)</option>
                <option value="ëª…ìš´ì‹¬ë²•">ëª…ìš´ì‹¬ë²• (ì¶•ê¸° 110)</option>
              </optgroup>
              <optgroup label="ì ˆì„¸ (0.3%/íšŒ)">
                <option value="ë‹¬ë§ˆì‹¬ê³µ">ë‹¬ë§ˆì‹¬ê³µ (ì¶•ê¸° 120)</option>
                <option value="ì²œë§ˆì‹¬ê³µ">ì²œë§ˆì‹¬ê³µ (ì¶•ê¸° 130)</option>
              </optgroup>
            </select>
          </div>
          <div class="input-group">
            <label>ğŸ¯ ëª©í‘œ ìˆ™ë ¨ë„</label>
            <select id="target-simbeop-mastery">
              <option value="100">1ë‹¨ê³„ (100%)</option>
              <option value="200">2ë‹¨ê³„ (200%)</option>
              <option value="300" selected>3ë‹¨ê³„ (300%)</option>
              <option value="400">4ë‹¨ê³„ (400%)</option>
              <option value="500">5ë‹¨ê³„ (500%)</option>
              <option value="600">6ë‹¨ê³„ (600%)</option>
              <option value="700">7ë‹¨ê³„ (700%)</option>
              <option value="800">8ë‹¨ê³„ (800%)</option>
              <option value="900">9ë‹¨ê³„ (900%)</option>
            </select>
          </div>
        </div>
        
        <div id="simbeop-summary" style="background: rgba(48,54,61,0.5); border-radius: 6px; padding: 10px; margin-bottom: 12px; font-size: 0.8rem;">
          <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
        
        <h3 style="font-size: 0.9rem; color: #8b949e; margin-bottom: 12px;">âš”ï¸ ë¬´ê³µ ì„¤ì •</h3>
        
        <div class="input-row">
          <div class="input-group">
            <label>ğŸ—¡ï¸ ê²€ìˆ  í˜„ì¬</label>
            <select id="current-geomsul">
              <option value="ì—†ìŒ">ì—†ìŒ</option>
              <option value="ì‚¼ë¥˜" selected>ì‚¼ë¥˜</option>
              <option value="ì´ë¥˜">ì´ë¥˜</option>
              <option value="ì¼ë¥˜">ì¼ë¥˜</option>
              <option value="ì ˆì •">ì ˆì •</option>
              <option value="ì´ˆì ˆì •">ì´ˆì ˆì •</option>
              <option value="í™”ê²½">í™”ê²½</option>
              <option value="í˜„ê²½">í˜„ê²½</option>
              <option value="ìƒì‚¬ê²½">ìƒì‚¬ê²½</option>
              <option value="ìì—°ê²½">ìì—°ê²½</option>
            </select>
          </div>
          <div class="input-group">
            <label>ğŸ—¡ï¸ ê²€ìˆ  ëª©í‘œ</label>
            <select id="target-geomsul">
              <option value="ê²½ì§€ë”°ë¼">ê²½ì§€ ë”°ë¼</option>
              <option value="ì‚¼ë¥˜">ì‚¼ë¥˜</option>
              <option value="ì´ë¥˜">ì´ë¥˜</option>
              <option value="ì¼ë¥˜">ì¼ë¥˜</option>
              <option value="ì ˆì •">ì ˆì •</option>
              <option value="ì´ˆì ˆì •" selected>ì´ˆì ˆì •</option>
              <option value="í™”ê²½">í™”ê²½</option>
              <option value="í˜„ê²½">í˜„ê²½</option>
              <option value="ìƒì‚¬ê²½">ìƒì‚¬ê²½</option>
              <option value="ìì—°ê²½">ìì—°ê²½</option>
            </select>
          </div>
        </div>
        
        <div class="input-row">
          <div class="input-group">
            <label>ğŸ‘Š ê¶Œê°ìˆ  í˜„ì¬</label>
            <select id="current-gwongak">
              <option value="ì—†ìŒ" selected>ì—†ìŒ</option>
              <option value="ì‚¼ë¥˜">ì‚¼ë¥˜</option>
              <option value="ì´ë¥˜">ì´ë¥˜</option>
              <option value="ì¼ë¥˜">ì¼ë¥˜</option>
              <option value="ì ˆì •">ì ˆì •</option>
              <option value="ì´ˆì ˆì •">ì´ˆì ˆì •</option>
              <option value="í™”ê²½">í™”ê²½</option>
              <option value="í˜„ê²½">í˜„ê²½</option>
              <option value="ìƒì‚¬ê²½">ìƒì‚¬ê²½</option>
              <option value="ìì—°ê²½">ìì—°ê²½</option>
            </select>
          </div>
          <div class="input-group">
            <label>ğŸ‘Š ê¶Œê°ìˆ  ëª©í‘œ</label>
            <select id="target-gwongak">
              <option value="ì—†ìŒ" selected>ì—†ìŒ (ì•ˆ ë°°ì›€)</option>
              <option value="ê²½ì§€ë”°ë¼">ê²½ì§€ ë”°ë¼</option>
              <option value="ì‚¼ë¥˜">ì‚¼ë¥˜</option>
              <option value="ì´ë¥˜">ì´ë¥˜</option>
              <option value="ì¼ë¥˜">ì¼ë¥˜</option>
              <option value="ì ˆì •">ì ˆì •</option>
              <option value="ì´ˆì ˆì •">ì´ˆì ˆì •</option>
              <option value="í™”ê²½">í™”ê²½</option>
              <option value="í˜„ê²½">í˜„ê²½</option>
              <option value="ìƒì‚¬ê²½">ìƒì‚¬ê²½</option>
              <option value="ìì—°ê²½">ìì—°ê²½</option>
            </select>
          </div>
        </div>
        
        <div class="input-row">
          <div class="input-group">
            <label>ğŸ¦¶ ë³´ë²• í˜„ì¬</label>
            <select id="current-bobeop">
              <option value="0">ì—†ìŒ</option>
              <option value="1">Lv1 (ê¸°ì´ˆ)</option>
              <option value="2">Lv2 (ê¸°ì´ˆ)</option>
              <option value="3" selected>Lv3 (ê¸°ì´ˆ)</option>
              <option value="4">Lv4 (ê¸°ë³¸)</option>
              <option value="5">Lv5 (ê¸°ë³¸)</option>
              <option value="6">Lv6 (ê¸°ë³¸)</option>
              <option value="7">Lv7 (ì‹¬í™”)</option>
              <option value="8">Lv8 (ì‹¬í™”)</option>
              <option value="9">Lv9 (ì‹¬í™”)</option>
            </select>
          </div>
          <div class="input-group">
            <label>ğŸ¦¶ ë³´ë²• ëª©í‘œ</label>
            <select id="target-bobeop">
              <option value="ê²½ì§€ë”°ë¼">ê²½ì§€ ë”°ë¼</option>
              <option value="0">ì—†ìŒ</option>
              <option value="1">Lv1 (ê¸°ì´ˆ)</option>
              <option value="2">Lv2 (ê¸°ì´ˆ)</option>
              <option value="3">Lv3 (ê¸°ì´ˆ)</option>
              <option value="4">Lv4 (ê¸°ë³¸)</option>
              <option value="5">Lv5 (ê¸°ë³¸)</option>
              <option value="6" selected>Lv6 (ê¸°ë³¸)</option>
              <option value="7">Lv7 (ì‹¬í™”)</option>
              <option value="8">Lv8 (ì‹¬í™”)</option>
              <option value="9">Lv9 (ì‹¬í™”)</option>
            </select>
          </div>
        </div>
        
        <div id="mugong-summary" style="background: rgba(48,54,61,0.5); border-radius: 6px; padding: 10px; margin-bottom: 12px; font-size: 0.8rem;">
          <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
          <div class="input-group">
            <label>ğŸ’Š ì˜ì•½ (ì›”)</label>
            <select id="yeongak-tier">
              <option value="none">ì‚¬ìš© ì•ˆí•¨</option>
              <option value="í•˜ê¸‰">í•˜ê¸‰ (+1ë…„/5ëƒ¥)</option>
              <option value="ì¤‘ê¸‰" selected>ì¤‘ê¸‰ (+4ë…„/20ëƒ¥)</option>
              <option value="ìƒê¸‰">ìƒê¸‰ (+10ë…„/40ëƒ¥)</option>
              <option value="ìµœìƒê¸‰">ìµœìƒê¸‰ (+30ë…„/100ëƒ¥)</option>
            </select>
          </div>
          <div class="input-group">
            <label>ğŸ² ì˜ì•½ ì£¼ê¸°</label>
            <select id="yeongak-freq">
              <option value="1">ë§¤ì›”</option>
              <option value="2" selected>ê²©ì›”</option>
              <option value="4">ë¶„ê¸°</option>
            </select>
          </div>
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
        
        <label class="checkbox-group">
          <input type="checkbox" id="premium-pack" checked>
          <span>ğŸ’ í”„ë¦¬ë¯¸ì—„ ì›”ì •ì•¡ (ê°€ì¡± ì‹œìŠ¤í…œ)</span>
        </label>
        
        <label class="checkbox-group">
          <input type="checkbox" id="daily-login">
          <span>ğŸ“… ë§¤ì¼ ì ‘ì† ë³´ìƒ</span>
        </label>
        
        <label class="checkbox-group">
          <input type="checkbox" id="include-mugong" checked>
          <span>âš”ï¸ ë¬´ê³µ ë¹„ìš© í¬í•¨ (ê²€ìˆ /ê¶Œê°ìˆ /ë³´ë²•)</span>
        </label>
        
        <div class="input-group" id="simbeop-mastery-group" style="display: none;">
          <!-- êµ¬ë²„ì „ í˜¸í™˜ìš©, ìˆ¨ê¹€ ì²˜ë¦¬ -->
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
        
        <h3 style="font-size: 0.9rem; color: #8b949e; margin-bottom: 12px;">ğŸ’± í™˜ìœ¨ ì„¤ì •</h3>
        
        <div class="input-group">
          <label>ì€ì 10ëƒ¥ = í˜„ê¸ˆ</label>
          <div class="input-row" style="align-items: center;">
            <select id="exchange-rate">
              <option value="5000">5,000ì›</option>
              <option value="10000" selected>10,000ì›</option>
              <option value="15000">15,000ì›</option>
              <option value="20000">20,000ì›</option>
              <option value="custom">ì§ì ‘ ì…ë ¥</option>
            </select>
            <input type="number" id="custom-rate" value="10000" min="1000" step="1000" style="display: none;" placeholder="ì›">
          </div>
        </div>
        
        <div class="rate-display" style="background: rgba(88,166,255,0.1); border: 1px solid rgba(88,166,255,0.3); border-radius: 6px; padding: 10px; margin-bottom: 16px; text-align: center;">
          <div style="font-size: 0.75rem; color: #8b949e;">í˜„ì¬ í™˜ìœ¨</div>
          <div style="font-size: 1.1rem; color: #58a6ff; font-weight: bold;">
            1ëƒ¥ = <span id="rate-per-nyang">1,000</span>ì›
          </div>
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
        
        <h3 style="font-size: 0.9rem; color: #8b949e; margin-bottom: 12px;">ğŸ—‘ï¸ ìºë¦­í„° ë¶„í•´ (ì²œìƒì˜ ê°€ë£¨)</h3>
        
        <div class="input-row">
          <div class="input-group">
            <label>ì¼ë°˜ ì œì</label>
            <input type="number" id="dust-normal" value="10" min="0">
          </div>
          <div class="input-group">
            <label>ì—˜ë¦¬íŠ¸ 2ëŒ€</label>
            <input type="number" id="dust-elite2" value="3" min="0">
          </div>
        </div>
        <div class="input-row">
          <div class="input-group">
            <label>ì—˜ë¦¬íŠ¸ 1ëŒ€</label>
            <input type="number" id="dust-elite1" value="2" min="0">
          </div>
          <div class="input-group">
            <label>ì‹ ì˜/íŠ¹ìˆ˜</label>
            <input type="number" id="dust-special" value="0" min="0">
          </div>
        </div>
        
        <hr style="border-color: #30363d; margin: 16px 0;">
        
        <h3 style="font-size: 0.9rem; color: #8b949e; margin-bottom: 12px;">ğŸ¨ ìˆ™ë°•/íšŒë³µ ì„¤ì •</h3>
        
        <div class="input-row">
          <div class="input-group">
            <label>ìˆ™ë°• ê²°ì œ</label>
            <select id="lodging-type">
              <option value="monthly" selected>ì›”ì •ì•¡ (500ë¬¸)</option>
              <option value="daily">ì¼ì¼ (20ë¬¸/ì¼)</option>
            </select>
          </div>
          <div class="input-group">
            <label>1ì¼ ë¬¼ì•½ ì†Œë¹„</label>
            <select id="daily-potion">
              <option value="1">1ê°œ (ê°€ë²¼ìš´ ìˆ˜ë ¨)</option>
              <option value="2" selected>2ê°œ (ë³´í†µ)</option>
              <option value="3">3ê°œ (ê°•ë„ ë†’ìŒ)</option>
              <option value="4">4ê°œ (ê·¹í•œ ìˆ˜ë ¨)</option>
            </select>
          </div>
        </div>
        
        <div style="background: rgba(48,54,61,0.5); border-radius: 6px; padding: 8px; margin-bottom: 12px; font-size: 0.75rem; color: #8b949e;">
          ğŸ’¡ ê²Œì„ 30ì¼ = í˜„ì‹¤ 10ì¼ | ìˆ™ë°• ì›”ì •ì•¡ 5ëƒ¥, ì¼ì¼ 6ëƒ¥ | íšŒë³µì•½ 2ë¬¸/ê°œ
        </div>
        
        <button class="btn btn-primary" onclick="calculate()">ğŸ“Š ê³„ì‚°í•˜ê¸°</button>
      </div>
      
      <!-- ê²°ê³¼ ì˜ì—­ -->
      <div class="results-area">
        <!-- ê²½ë¡œ í‘œì‹œ -->
        <div class="result-card">
          <h3>ğŸ›¤ï¸ ì„±ì¥ ê²½ë¡œ</h3>
          <div class="path-display" id="path-display">
            <span class="path-node current">ì¼ë¥˜</span>
            <span class="path-arrow">â†’</span>
            <span class="path-node">ì ˆì •</span>
            <span class="path-arrow">â†’</span>
            <span class="path-node target">ì´ˆì ˆì •</span>
          </div>
        </div>
        
        <!-- í•µì‹¬ ì§€í‘œ -->
        <div class="result-card">
          <h3>ğŸ“ˆ í•µì‹¬ ì§€í‘œ</h3>
          <div class="result-grid">
            <div class="result-item">
              <div class="label">í•„ìš” ë‚´ê³µ</div>
              <div class="value blue" id="total-neigong">90</div>
              <span class="unit">ë…„ì¹˜</span>
            </div>
            <div class="result-item">
              <div class="label">í•„ìš” ì‹¬ë“</div>
              <div class="value purple" id="total-simdeuk">100</div>
              <span class="unit">% Ã— 1íšŒ</span>
            </div>
            <div class="result-item">
              <div class="label">ì†Œìš” ê¸°ê°„ (í˜„ì‹¤)</div>
              <div class="value green" id="real-days">450</div>
              <span class="unit">ì¼</span>
            </div>
            <div class="result-item">
              <div class="label">ì†Œìš” ê¸°ê°„ (ê²Œì„)</div>
              <div class="value green" id="game-days">1350</div>
              <span class="unit">ì¼</span>
            </div>
          </div>
        </div>
        
        <!-- ë¹„ìš© ìš”ì•½ -->
        <div class="result-card">
          <h3>ğŸ’° ë¹„ìš© ìš”ì•½</h3>
          <div class="summary-box">
            <div class="summary-title">ì´ ì˜ˆìƒ ë¹„ìš©</div>
            <div class="summary-value" id="total-cost">127.5</div>
            <div class="summary-sub">ì€ì (ëƒ¥)</div>
          </div>
          <div class="result-grid" style="margin-top: 16px;">
            <div class="result-item">
              <div class="label">í˜„ê¸ˆ í™˜ì‚°</div>
              <div class="value gold" id="real-money">127,500</div>
              <span class="unit">ì›</span>
            </div>
            <div class="result-item">
              <div class="label">ì›” í‰ê·  ë¹„ìš©</div>
              <div class="value gold" id="monthly-cost">8,500</div>
              <span class="unit">ì›/ì›”</span>
            </div>
          </div>
        </div>
        
        <!-- ìƒì„¸ ë‚´ì—­ -->
        <div class="result-card">
          <h3>ğŸ“‹ ë¹„ìš© ìƒì„¸ ë‚´ì—­</h3>
          <table class="detail-table" id="cost-detail">
            <thead>
              <tr>
                <th>í•­ëª©</th>
                <th>ìˆ˜ëŸ‰</th>
                <th>ë‹¨ê°€</th>
                <th>ì†Œê³„</th>
              </tr>
            </thead>
            <tbody>
              <!-- ë™ì  ìƒì„± -->
            </tbody>
          </table>
        </div>
        
        <!-- ë‹¨ê³„ë³„ ë¶„ì„ -->
        <div class="result-card">
          <h3>ğŸ“Š ë‹¨ê³„ë³„ ë¶„ì„</h3>
          <table class="detail-table" id="stage-detail">
            <thead>
              <tr>
                <th>ê²½ì§€</th>
                <th>í•„ìš” ë‚´ê³µ</th>
                <th>ì‹¬ë“</th>
                <th>ì˜ˆìƒ ê¸°ê°„</th>
                <th>ë¹„ìš©</th>
              </tr>
            </thead>
            <tbody>
              <!-- ë™ì  ìƒì„± -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <footer>
      S-Engine Growth Simulator v2.0 by ShadowK | ê²€ìˆ +ê¶Œê°ìˆ +ë³´ë²• = ì§„ì •í•œ ë¬´ì¸
    </footer>
  </div>
  
  <script>
    // ===== ë°ì´í„° ì •ì˜ =====
    
    // ê²½ì§€ë³„ ëˆ„ì  ë‚´ê³µ (ë…„ì¹˜)
    const GYEONGJI_NEIGONG = {
      'ì‚¼ë¥˜': 0,
      'ì´ë¥˜': 10,
      'ì¼ë¥˜': 30,
      'ì ˆì •': 60,
      'ì´ˆì ˆì •': 120,
      'í™”ê²½': 180,
      'í˜„ê²½': 240,
      'ìƒì‚¬ê²½': 300,
      'ìì—°ê²½': 360
    };
    
    // ê²½ì§€ ìˆœì„œ
    const GYEONGJI_ORDER = ['ì‚¼ë¥˜', 'ì´ë¥˜', 'ì¼ë¥˜', 'ì ˆì •', 'ì´ˆì ˆì •', 'í™”ê²½', 'í˜„ê²½', 'ìƒì‚¬ê²½', 'ìì—°ê²½'];
    
    // ì‹¬ë“ ìš”êµ¬ëŸ‰ (í•´ë‹¹ ê²½ì§€ë¡œ ì˜¬ë¼ê°€ê¸° ìœ„í•œ)
    const SIMDEUK_REQUIRED = {
      'ì´ë¥˜': { count: 0, percent: 0 },
      'ì¼ë¥˜': { count: 0, percent: 0 },
      'ì ˆì •': { count: 0, percent: 0 },
      'ì´ˆì ˆì •': { count: 1, percent: 100 },    // 100% x 1íšŒ
      'í™”ê²½': { count: 3, percent: 100 },      // 100% x 3íšŒ
      'í˜„ê²½': { count: 9, percent: 100 },      // 100% x 9íšŒ
      'ìƒì‚¬ê²½': { count: 27, percent: 100 },   // 100% x 27íšŒ
      'ìì—°ê²½': { count: 81, percent: 100 }    // 100% x 81íšŒ
    };
    
    // ì‹¬ë“ì„œ ê°€ê²© (ì€ì)
    const SIMDEUK_COST = {
      'ì´ˆì ˆì •': 5,   // 10~20% íšë“
      'í™”ê²½': 10,
      'í˜„ê²½': 15,
      'ìƒì‚¬ê²½': 20,
      'ìì—°ê²½': 25
    };
    
    // ì‹¬ë²• ì¶•ê¸°ì†ë„
    const SIMBEOP_SPEED = {
      'ì‚¼ì¬ì‹¬ë²•': 10,
      'ê¸°ì´ˆì‹¬ë²•': 20,
      'ê¸°ë³¸ì‹¬ë²•': 30,
      'ì‹¬í™”ì‹¬ë²•': 40,
      'ë¹„ì „ì‹¬ë²•': 70,
      'ëª…ìš´ì‹¬ë²•': 110,
      'ë‹¬ë§ˆì‹¬ê³µ': 120,
      'ì²œë§ˆì‹¬ê³µ': 130
    };
    
    // ì‹¬ë²• ìŠµë“ ë¹„ìš© (ìµœì´ˆ ë°°ì›€)
    const SIMBEOP_LEARN_COST = {
      'ì‚¼ì¬ì‹¬ë²•': 0,
      'ê¸°ì´ˆì‹¬ë²•': 1,
      'ê¸°ë³¸ì‹¬ë²•': 5,
      'ì‹¬í™”ì‹¬ë²•': 10,
      'ë¹„ì „ì‹¬ë²•': 20,
      'ëª…ìš´ì‹¬ë²•': 0,   // íŠ¹ìˆ˜ (ì£¼ì¸ê³µìš©)
      'ë‹¬ë§ˆì‹¬ê³µ': 40,
      'ì²œë§ˆì‹¬ê³µ': 40
    };
    
    // ì‹¬ë²• ê¹¨ë‹¬ìŒì˜ ì±… ë¹„ìš© + íšë“ë¥ 
    const SIMBEOP_BOOK = {
      'ì‚¼ì¬ì‹¬ë²•': { cost: 0, minRate: 100, maxRate: 100 },
      'ê¸°ì´ˆì‹¬ë²•': { cost: 1, minRate: 100, maxRate: 100 },
      'ê¸°ë³¸ì‹¬ë²•': { cost: 5, minRate: 100, maxRate: 100 },
      'ì‹¬í™”ì‹¬ë²•': { cost: 10, minRate: 5, maxRate: 20 },   // 10ëƒ¥, 5~20%
      'ë¹„ì „ì‹¬ë²•': { cost: 20, minRate: 5, maxRate: 20 },   // 20ëƒ¥, 5~20%
      'ëª…ìš´ì‹¬ë²•': { cost: 0, minRate: 100, maxRate: 100 },
      'ë‹¬ë§ˆì‹¬ê³µ': { cost: 40, minRate: 3, maxRate: 7 },    // 40ëƒ¥, 3~7% â† ì•…ë„
      'ì²œë§ˆì‹¬ê³µ': { cost: 40, minRate: 3, maxRate: 7 }     // 40ëƒ¥, 3~7% â† ì•…ë„
    };
    
    // ì‹¬ë²• ìˆ™ë ¨ ë‹¨ê³„ (ë‹¨ê³„ ìˆ˜ ì°¨ë“±!)
    const SIMBEOP_MASTERY = {
      'ì‚¼ì¬ì‹¬ë²•': 1,  // 1ë‹¨ê³„
      'ê¸°ì´ˆì‹¬ë²•': 1,  // 1ë‹¨ê³„
      'ê¸°ë³¸ì‹¬ë²•': 1,  // 1ë‹¨ê³„
      'ì‹¬í™”ì‹¬ë²•': 3,  // 3ë‹¨ê³„ (ì…ë¬¸/ëŠ¥ìˆ™/ì™„ìˆ™)
      'ë¹„ì „ì‹¬ë²•': 5,  // 5ë‹¨ê³„
      'ëª…ìš´ì‹¬ë²•': 5,  // 5ë‹¨ê³„
      'ë‹¬ë§ˆì‹¬ê³µ': 9,  // 9ë‹¨ê³„ â† ê·¹ì•…
      'ì²œë§ˆì‹¬ê³µ': 9   // 9ë‹¨ê³„ â† ê·¹ì•…
    };
    
    // ìºë¦­í„° ë¶„í•´ â†’ ì²œìƒì˜ ê°€ë£¨
    const CHAR_DUST = {
      'ì¼ë°˜3ëŒ€': 1,
      'ì¼ë°˜2ëŒ€': 1,
      'ì¼ë°˜1ëŒ€': 1,
      'ì—˜ë¦¬íŠ¸2ëŒ€': 2,
      'ì—˜ë¦¬íŠ¸1ëŒ€': 3,
      'ì‹ ì˜': { min: 1, max: 5 },
      'ë¬´ë¦¼ë§¹ì£¼': { min: 3, max: 7 },
      'ëª…ìš´': { min: 3, max: 7 },
      'ë°±ì˜': { min: 6, max: 10 },
      'ì¥ì‚¼ë´‰': { min: 6, max: 10 }
    };
    
    // ì²œìƒì˜ ê°€ë£¨ 10ê°œ = ê¹¨ë‹¬ìŒ 5%
    const DUST_TO_SIMDEUK = 5; // 10ê°œë‹¹ 5%
    
    // ì‹¬ë²•ë³„ ìˆ™ë ¨ì¹˜ ìƒìŠ¹ë¥  (ìš´ê¸° 1íšŒë‹¹)
    const SIMBEOP_MASTERY_RATE = {
      'ì‚¼ì¬ì‹¬ë²•': 2,    // ê¸°ì´ˆê¸‰
      'ê¸°ì´ˆì‹¬ë²•': 2,
      'ê¸°ë³¸ì‹¬ë²•': 2,
      'ì‹¬í™”ì‹¬ë²•': 1,    // ì¤‘ê¸‰
      'ë¹„ì „ì‹¬ë²•': 0.5,  // ê³ ê¸‰
      'ëª…ìš´ì‹¬ë²•': 0.5,
      'ë‹¬ë§ˆì‹¬ê³µ': 0.3,  // ìµœìƒê¸‰
      'ì²œë§ˆì‹¬ê³µ': 0.3
    };
    
    // ===== ë¬´ê³µ ê°€ê²© ë°ì´í„° =====
    
    // ê²€ìˆ /ê¶Œê°ìˆ  ê°€ê²© (ê²½ì§€ë³„)
    const MUGONG_COST = {
      'ì‚¼ë¥˜': 1,
      'ì´ë¥˜': 2,
      'ì¼ë¥˜': 3,
      'ì ˆì •': 4,
      'ì´ˆì ˆì •': 8,
      'í™”ê²½': 16,
      'í˜„ê²½': 32,
      'ìƒì‚¬ê²½': 64,
      'ìì—°ê²½': 128
    };
    
    // ë³´ë²• ê°€ê²© (ë ˆë²¨ë³„)
    const BOBEOP_COST = {
      1: 1,    // ê¸°ì´ˆ Lv1: ì€ 1ëƒ¥
      2: 1,    // ê¸°ì´ˆ Lv2: ì€ 1ëƒ¥ (ì¶”ê°€ 2ê¶Œ)
      3: 1,    // ê¸°ì´ˆ Lv3: ì€ 1ëƒ¥ (ì¶”ê°€ 3ê¶Œ)
      4: 10,   // ê¸°ë³¸ Lv4: ê¸ˆ 1ëƒ¥ = ì€ 10ëƒ¥
      5: 10,   // ê¸°ë³¸ Lv5
      6: 10,   // ê¸°ë³¸ Lv6
      7: 100,  // ì‹¬í™” Lv7: ê¸ˆ 10ëƒ¥ = ì€ 100ëƒ¥
      8: 100,  // ì‹¬í™” Lv8
      9: 100   // ì‹¬í™” Lv9
    };
    
    // ë³´ë²• ë ˆë²¨ë³„ í•„ìš” ê¶Œìˆ˜ (ëˆ„ì )
    const BOBEOP_BOOKS = {
      1: 1,   // Lv1: 1ê¶Œ
      2: 3,   // Lv2: ì¶”ê°€ 2ê¶Œ = ì´ 3ê¶Œ
      3: 6,   // Lv3: ì¶”ê°€ 3ê¶Œ = ì´ 6ê¶Œ
      4: 1,   // Lv4: ê¸°ë³¸ 1ê¶Œ
      5: 3,   // Lv5: ì¶”ê°€ 2ê¶Œ = ì´ 3ê¶Œ
      6: 6,   // Lv6: ì¶”ê°€ 3ê¶Œ = ì´ 6ê¶Œ
      7: 1,   // Lv7: ì‹¬í™” 1ê¶Œ
      8: 3,   // Lv8: ì¶”ê°€ 2ê¶Œ = ì´ 3ê¶Œ
      9: 6    // Lv9: ì¶”ê°€ 3ê¶Œ = ì´ 6ê¶Œ
    };
    
    // ê²½ì§€ë³„ ë³´ë²• ìµœëŒ€ ë ˆë²¨
    const BOBEOP_LIMIT = {
      'ì‚¼ë¥˜': 2, 'ì´ë¥˜': 3, 'ì¼ë¥˜': 4, 'ì ˆì •': 5, 'ì´ˆì ˆì •': 6,
      'í™”ê²½': 7, 'í˜„ê²½': 8, 'ìƒì‚¬ê²½': 9, 'ìì—°ê²½': 9
    };
    
    // ì‹¬ë²• í‹°ì–´ ë¶„ë¥˜
    const SIMBEOP_TIER = {
      'ì‚¼ì¬ì‹¬ë²•': { tier: 'ê¸°ì´ˆ', color: '#8b949e' },
      'ê¸°ì´ˆì‹¬ë²•': { tier: 'ê¸°ì´ˆ', color: '#8b949e' },
      'ê¸°ë³¸ì‹¬ë²•': { tier: 'ê¸°ë³¸', color: '#3fb950' },
      'ì‹¬í™”ì‹¬ë²•': { tier: 'ì‹¬í™”', color: '#58a6ff' },
      'ë¹„ì „ì‹¬ë²•': { tier: 'ë¹„ì „', color: '#a371f7' },
      'ëª…ìš´ì‹¬ë²•': { tier: 'ëª…ìš´', color: '#ffd700' },
      'ë‹¬ë§ˆì‹¬ê³µ': { tier: 'ì ˆì„¸', color: '#f85149' },
      'ì²œë§ˆì‹¬ê³µ': { tier: 'ì ˆì„¸', color: '#f85149' }
    };
    
    // ìˆ™ë°•/íšŒë³µì•½ ë¹„ìš© (ë¬¸ ë‹¨ìœ„, 100ë¬¸ = 1ëƒ¥)
    const LODGING = {
      daily: 20,      // í•˜ë£¨ 20ë¬¸ (ê²Œì„ ê¸°ì¤€)
      monthly: 500    // ì›” ê²°ì œ 500ë¬¸ (ê²Œì„ 30ì¼)
    };
    
    const POTION = {
      cost: 2,        // 2ë¬¸/ê°œ
      healPercent: 15 // 15% íšŒë³µ
    };
    
    // ìš´ê¸°ì¡°ì‹ ì¤‘ ì˜ˆìƒ ë¬¼ì•½ ì†Œë¹„ (1ì¼ 15ë¶„ ìˆ˜ë ¨, ë¶„ë‹¹ ë‚´ìƒ)
    const DAILY_POTION_USE = 2; // ëŒ€ëµ 1ì¼ 2ê°œ ì†Œë¹„ ì¶”ì •
    
    // ì˜ì•½ ë°ì´í„°
    const YEONGAK = {
      'none': { years: 0, cost: 0 },
      'í•˜ê¸‰': { years: 1, cost: 5 },
      'ì¤‘ê¸‰': { years: 4, cost: 20 },
      'ìƒê¸‰': { years: 10, cost: 40 },
      'ìµœìƒê¸‰': { years: 30, cost: 100 }
    };
    
    // ===== ê³„ì‚° í•¨ìˆ˜ =====
    function calculate() {
      const currentGyeongji = document.getElementById('current-gyeongji').value;
      const targetGyeongji = document.getElementById('target-gyeongji').value;
      
      // ì‹¬ë²• ì„¤ì • (ìƒˆë¡œìš´ êµ¬ì¡°)
      const currentSimbeop = document.getElementById('current-simbeop').value;
      const currentSimbeopMastery = parseInt(document.getElementById('current-simbeop-mastery').value);
      const targetSimbeopRaw = document.getElementById('target-simbeop').value;
      const targetSimbeop = targetSimbeopRaw === 'í˜„ì¬ìœ ì§€' ? currentSimbeop : targetSimbeopRaw;
      const targetSimbeopMastery = parseInt(document.getElementById('target-simbeop-mastery').value);
      
      // ì‹¤ì œ ì‚¬ìš©í•  ì‹¬ë²• (ì¶•ê¸°ì†ë„ìš©) - ëª©í‘œ ì‹¬ë²• ê¸°ì¤€
      const activeSimbeop = targetSimbeop === 'ì—†ìŒ' ? 'ê¸°ì´ˆì‹¬ë²•' : targetSimbeop;
      
      const yeongakTier = document.getElementById('yeongak-tier').value;
      const yeongakFreq = parseInt(document.getElementById('yeongak-freq').value);
      const hasPremium = document.getElementById('premium-pack').checked;
      const hasDailyLogin = document.getElementById('daily-login').checked;
      const includeMugong = document.getElementById('include-mugong').checked;
      
      // ìºë¦­í„° ë¶„í•´ ì…ë ¥
      const dustNormal = parseInt(document.getElementById('dust-normal').value) || 0;
      const dustElite2 = parseInt(document.getElementById('dust-elite2').value) || 0;
      const dustElite1 = parseInt(document.getElementById('dust-elite1').value) || 0;
      const dustSpecial = parseInt(document.getElementById('dust-special').value) || 0;
      
      // ì²œìƒì˜ ê°€ë£¨ ê³„ì‚°
      const totalDust = dustNormal * 1 + dustElite2 * 2 + dustElite1 * 3 + dustSpecial * 3;
      const dustSimdeuk = Math.floor(totalDust / 10) * 5; // 10ê°œë‹¹ 5%
      
      const currentIdx = GYEONGJI_ORDER.indexOf(currentGyeongji);
      const targetIdx = GYEONGJI_ORDER.indexOf(targetGyeongji);
      
      if (targetIdx <= currentIdx) {
        alert('ëª©í‘œ ê²½ì§€ëŠ” í˜„ì¬ ê²½ì§€ë³´ë‹¤ ë†’ì•„ì•¼ í•©ë‹ˆë‹¤!');
        return;
      }
      
      // ì‹¬ë²• ìš”ì•½ í‘œì‹œ
      updateSimbeopSummary(currentSimbeop, currentSimbeopMastery, targetSimbeop, targetSimbeopMastery);
      
      // ê²½ë¡œ í‘œì‹œ
      renderPath(currentIdx, targetIdx);
      
      // í•„ìš” ë‚´ê³µ ê³„ì‚°
      const currentNeigong = GYEONGJI_NEIGONG[currentGyeongji];
      const targetNeigong = GYEONGJI_NEIGONG[targetGyeongji];
      const requiredNeigong = targetNeigong - currentNeigong;
      
      // ê²½ì§€ ì‹¬ë“ ê³„ì‚°
      let totalSimdeukPercent = 0;
      for (let i = currentIdx + 1; i <= targetIdx; i++) {
        const g = GYEONGJI_ORDER[i];
        totalSimdeukPercent += SIMDEUK_REQUIRED[g].count * 100;
      }
      
      // ì²œìƒì˜ ê°€ë£¨ë¡œ ì‹¬ë“ ì°¨ê°
      let remainingSimdeuk = Math.max(0, totalSimdeukPercent - dustSimdeuk);
      
      // ===== ì‹¬ë²• ìˆ™ë ¨ ê¸°ê°„ ê³„ì‚° =====
      let simbeopMasteryDays = 0;
      let requiredMasteryPercent = 0;
      
      if (targetSimbeop !== 'ì—†ìŒ') {
        // ì‹¬ë²•ì´ ë°”ë€ŒëŠ” ê²½ìš°: 0%ë¶€í„° ì‹œì‘
        // ì‹¬ë²•ì´ ê°™ì€ ê²½ìš°: í˜„ì¬ ìˆ™ë ¨ë„ì—ì„œ ì‹œì‘
        const startMastery = (currentSimbeop !== targetSimbeop) ? 0 : currentSimbeopMastery;
        requiredMasteryPercent = Math.max(0, targetSimbeopMastery - startMastery);
        
        if (requiredMasteryPercent > 0) {
          const masteryRate = SIMBEOP_MASTERY_RATE[targetSimbeop] || 2;
          const requiredUngi = Math.ceil(requiredMasteryPercent / masteryRate);
          simbeopMasteryDays = requiredUngi; // ê²Œì„ ì¼ìˆ˜ (1ì¼ 1íšŒ ìš´ê¸°)
        }
      }
      
      // ì‹¬ë²• ì¶•ê¸°ì†ë„ë¡œ ê²½ì§€ ì„±ì¥ ê¸°ê°„ ê³„ì‚°
      const chukgiSpeed = SIMBEOP_SPEED[activeSimbeop] || 20;
      
      // ì˜ì•½ íš¨ê³¼ ê³„ì‚°
      const yeongak = YEONGAK[yeongakTier];
      
      const gameYearsNeeded = requiredNeigong;
      let effectiveYears = gameYearsNeeded;
      
      const monthsNeeded = Math.ceil(effectiveYears / chukgiSpeed * 12);
      const yeongakUsages = Math.floor(monthsNeeded / yeongakFreq);
      const yeongakYears = yeongakUsages * yeongak.years;
      effectiveYears = Math.max(0, effectiveYears - yeongakYears);
      
      if (hasPremium) {
        effectiveYears *= 0.85;
      }
      
      // ê²½ì§€ ì„±ì¥ì— í•„ìš”í•œ ê²Œì„ ì¼ìˆ˜
      const gyeongjiGameDays = Math.ceil(effectiveYears / (chukgiSpeed / 10) * 365);
      
      // ì´ ê²Œì„ ì¼ìˆ˜ = ê²½ì§€ ì„±ì¥ê³¼ ì‹¬ë²• ìˆ™ë ¨ ì¤‘ ë” ê¸´ ê²ƒ (ë³‘ë ¬ ì§„í–‰)
      const gameDays = Math.max(gyeongjiGameDays, simbeopMasteryDays);
      const realDays = Math.ceil(gameDays / 3);
      
      // ===== ë¹„ìš© ê³„ì‚° =====
      let costs = [];
      let totalCost = 0;
      
      // 1. ì‹¬ë²• ìŠµë“ ë¹„ìš© (ì‹¬ë²•ì´ ë°”ë€ŒëŠ” ê²½ìš°)
      const isNewSimbeop = currentSimbeop !== targetSimbeop && targetSimbeop !== 'ì—†ìŒ';
      if (isNewSimbeop && SIMBEOP_MASTERY[targetSimbeop] > 1) {
        const book = SIMBEOP_BOOK[targetSimbeop];
        const learnCost = SIMBEOP_LEARN_COST[targetSimbeop];
        
        // ìµœì´ˆ ë°°ì›€
        if (learnCost > 0) {
          costs.push({
            name: `ğŸ“œ ${targetSimbeop} ìµœì´ˆ ë°°ì›€`,
            qty: '1íšŒ',
            unit: learnCost,
            subtotal: learnCost
          });
          totalCost += learnCost;
        }
        
        // ê¹¨ë‹¬ìŒì˜ ì±… (ìŠµë“ìš© - ë‹¨ê³„ í•´ê¸ˆ)
        if (book.cost > 0) {
          const avgRate = (book.minRate + book.maxRate) / 2;
          const masteryStages = Math.ceil(targetSimbeopMastery / 100);
          const booksPerStage = Math.ceil(100 / avgRate);
          const totalBooks = booksPerStage * masteryStages;
          const bookCost = totalBooks * book.cost;
          
          costs.push({
            name: `ğŸ“š ${targetSimbeop} ê¹¨ë‹¬ìŒì˜ ì±…`,
            qty: `${totalBooks}íšŒ (${masteryStages}ë‹¨ê³„)`,
            unit: book.cost,
            subtotal: bookCost,
            note: `${book.minRate}~${book.maxRate}% íšë“`
          });
          totalCost += bookCost;
        }
      }
      
      // 2. ì‹¬ë²• ìˆ™ë ¨ ì‹œê°„ í‘œì‹œ (ë¹„ìš© ì•„ë‹˜, ì •ë³´ìš©)
      if (requiredMasteryPercent > 0) {
        const masteryRate = SIMBEOP_MASTERY_RATE[targetSimbeop] || 2;
        costs.push({
          name: `â±ï¸ ì‹¬ë²• ìˆ™ë ¨ (${targetSimbeop})`,
          qty: `${requiredMasteryPercent}% ìƒìŠ¹`,
          unit: `${masteryRate}%/íšŒ`,
          subtotal: 0,
          note: `${simbeopMasteryDays}ì¼ (ìš´ê¸° ìˆ˜ë ¨)`
        });
      }
      
      // 3. ê²½ì§€ ì‹¬ë“ì„œ ë¹„ìš©
      for (let i = currentIdx + 1; i <= targetIdx; i++) {
        const g = GYEONGJI_ORDER[i];
        const simdeukCount = SIMDEUK_REQUIRED[g].count;
        if (simdeukCount > 0) {
          const avgAttempts = Math.ceil(100 / 15) * simdeukCount;
          const cost = avgAttempts * SIMDEUK_COST[g];
          costs.push({
            name: `ì‹¬ë“ì„œ (${g})`,
            qty: `${avgAttempts}íšŒ`,
            unit: SIMDEUK_COST[g],
            subtotal: cost
          });
          totalCost += cost;
        }
      }
      
      // 4. ì²œìƒì˜ ê°€ë£¨ (ë¹„ìš© ì ˆê°)
      if (totalDust > 0) {
        const savedCost = Math.floor(dustSimdeuk / 15) * 5;
        costs.push({
          name: `âœ¨ ì²œìƒì˜ ê°€ë£¨ (ì ˆê°)`,
          qty: `${totalDust}ê°œ â†’ ${dustSimdeuk}%`,
          unit: '-',
          subtotal: -savedCost,
          note: 'ìºë¦­ ë¶„í•´'
        });
        totalCost -= savedCost;
      }
      
      // 5. ì˜ì•½ ë¹„ìš©
      if (yeongakTier !== 'none' && yeongakUsages > 0) {
        const yeongakCost = yeongakUsages * yeongak.cost;
        costs.push({
          name: `ì˜ì•½ ${yeongakTier}`,
          qty: `${yeongakUsages}íšŒ`,
          unit: yeongak.cost,
          subtotal: yeongakCost
        });
        totalCost += yeongakCost;
      }
      
      // 6. ë¬´ê³µ ë¹„ìš© (ê²€ìˆ , ê¶Œê°ìˆ , ë³´ë²•)
      if (includeMugong) {
        // ê²€ìˆ 
        const currentGeomsul = document.getElementById('current-geomsul').value;
        const targetGeomsulRaw = document.getElementById('target-geomsul').value;
        const targetGeomsul = targetGeomsulRaw === 'ê²½ì§€ë”°ë¼' ? targetGyeongji : targetGeomsulRaw;
        
        let geomsulCost = 0;
        if (targetGeomsul !== 'ì—†ìŒ') {
          const currentGeomsulIdx = currentGeomsul === 'ì—†ìŒ' ? -1 : GYEONGJI_ORDER.indexOf(currentGeomsul);
          const targetGeomsulIdx = GYEONGJI_ORDER.indexOf(targetGeomsul);
          
          for (let i = currentGeomsulIdx + 1; i <= targetGeomsulIdx; i++) {
            if (i >= 0) geomsulCost += MUGONG_COST[GYEONGJI_ORDER[i]];
          }
          
          if (geomsulCost > 0) {
            costs.push({
              name: `ğŸ—¡ï¸ ê²€ìˆ  (${currentGeomsul}â†’${targetGeomsul})`,
              qty: `${targetGeomsulIdx - currentGeomsulIdx}ë‹¨ê³„`,
              unit: '-',
              subtotal: geomsulCost
            });
            totalCost += geomsulCost;
          }
        }
        
        // ê¶Œê°ìˆ 
        const currentGwongak = document.getElementById('current-gwongak').value;
        const targetGwongakRaw = document.getElementById('target-gwongak').value;
        const targetGwongak = targetGwongakRaw === 'ê²½ì§€ë”°ë¼' ? targetGyeongji : targetGwongakRaw;
        
        let gwongakCost = 0;
        if (targetGwongak !== 'ì—†ìŒ') {
          const currentGwongakIdx = currentGwongak === 'ì—†ìŒ' ? -1 : GYEONGJI_ORDER.indexOf(currentGwongak);
          const targetGwongakIdx = GYEONGJI_ORDER.indexOf(targetGwongak);
          
          for (let i = currentGwongakIdx + 1; i <= targetGwongakIdx; i++) {
            if (i >= 0) gwongakCost += MUGONG_COST[GYEONGJI_ORDER[i]];
          }
          
          if (gwongakCost > 0) {
            costs.push({
              name: `ğŸ‘Š ê¶Œê°ìˆ  (${currentGwongak}â†’${targetGwongak})`,
              qty: `${targetGwongakIdx - currentGwongakIdx}ë‹¨ê³„`,
              unit: '-',
              subtotal: gwongakCost
            });
            totalCost += gwongakCost;
          }
        }
        
        // ë³´ë²•
        const currentBobeop = parseInt(document.getElementById('current-bobeop').value);
        const targetBobeopRaw = document.getElementById('target-bobeop').value;
        const targetBobeop = targetBobeopRaw === 'ê²½ì§€ë”°ë¼' 
          ? BOBEOP_LIMIT[targetGyeongji] 
          : parseInt(targetBobeopRaw);
        
        let bobeopCost = 0;
        if (targetBobeop > currentBobeop) {
          // ë“±ê¸‰ë³„ë¡œ ê¶Œìˆ˜ ê³„ì‚°
          for (let lv = currentBobeop + 1; lv <= targetBobeop; lv++) {
            // ê° ë ˆë²¨ì—ì„œ í•„ìš”í•œ ê¶Œìˆ˜
            let booksNeeded = 0;
            if (lv === 1 || lv === 4 || lv === 7) booksNeeded = 1;  // ìƒˆ ë“±ê¸‰ ì‹œì‘
            else if (lv === 2 || lv === 5 || lv === 8) booksNeeded = 2;  // ì¶”ê°€ 2ê¶Œ
            else if (lv === 3 || lv === 6 || lv === 9) booksNeeded = 3;  // ì¶”ê°€ 3ê¶Œ
            
            bobeopCost += booksNeeded * BOBEOP_COST[lv];
          }
          
          if (bobeopCost > 0) {
            const tierName = targetBobeop <= 3 ? 'ê¸°ì´ˆ' : targetBobeop <= 6 ? 'ê¸°ë³¸' : 'ì‹¬í™”';
            costs.push({
              name: `ğŸ¦¶ ë³´ë²• (Lv${currentBobeop}â†’Lv${targetBobeop})`,
              qty: `${tierName}`,
              unit: '-',
              subtotal: bobeopCost
            });
            totalCost += bobeopCost;
          }
        }
        
        // ë¬´ê³µ ìš”ì•½ ì—…ë°ì´íŠ¸
        updateMugongSummary(currentGeomsul, targetGeomsul, geomsulCost, 
                           currentGwongak, targetGwongak, gwongakCost,
                           currentBobeop, targetBobeop, bobeopCost);
      }
      
      // 7. í”„ë¦¬ë¯¸ì—„ ì›”ì •ì•¡
      if (hasPremium) {
        const months = Math.ceil(realDays / 30);
        const premiumCost = months * 30;
        costs.push({
          name: 'í”„ë¦¬ë¯¸ì—„ ì›”ì •ì•¡',
          qty: `${months}ê°œì›”`,
          unit: 30,
          subtotal: premiumCost,
          note: 'ë¯¸ì ‘ì† ìˆ™ë ¨ì¹˜ ëˆ„ì '
        });
        totalCost += premiumCost;
      }
      
      // 8. ìˆ™ë°•ë¹„
      const lodgingType = document.getElementById('lodging-type').value;
      const gameMonths = Math.ceil(gameDays / 30);
      let lodgingCostMun;
      
      if (lodgingType === 'monthly') {
        lodgingCostMun = gameMonths * LODGING.monthly;
      } else {
        lodgingCostMun = gameDays * LODGING.daily;
      }
      
      const lodgingCostNyang = lodgingCostMun / 100;
      costs.push({
        name: `ìˆ™ë°•ë¹„ (${lodgingType === 'monthly' ? 'ì›”ì •ì•¡' : 'ì¼ì¼'})`,
        qty: lodgingType === 'monthly' ? `${gameMonths}ê°œì›”` : `${gameDays}ì¼`,
        unit: lodgingType === 'monthly' ? '5' : '0.2',
        subtotal: lodgingCostNyang,
        note: `í˜„ì‹¤ ${realDays}ì¼`
      });
      totalCost += lodgingCostNyang;
      
      // 9. íšŒë³µì•½
      const dailyPotionUse = parseInt(document.getElementById('daily-potion').value);
      const totalPotions = realDays * dailyPotionUse;
      const potionCostMun = totalPotions * POTION.cost;
      const potionCostNyang = potionCostMun / 100;
      costs.push({
        name: 'íšŒë³µì•½ (ìš´ê¸°ì¡°ì‹)',
        qty: `${totalPotions.toLocaleString()}ê°œ`,
        unit: `${POTION.cost}ë¬¸`,
        subtotal: potionCostNyang,
        note: `1ì¼ ${dailyPotionUse}ê°œ`
      });
      totalCost += potionCostNyang;
      
      // ê²°ê³¼ ì¶œë ¥
      document.getElementById('total-neigong').textContent = requiredNeigong;
      
      const simdeukDisplay = totalSimdeukPercent > 0 
        ? `${totalSimdeukPercent}%` + (dustSimdeuk > 0 ? ` (-${dustSimdeuk}%)` : '')
        : 'ì—†ìŒ';
      document.getElementById('total-simdeuk').textContent = simdeukDisplay;
      
      document.getElementById('real-days').textContent = realDays.toLocaleString();
      document.getElementById('game-days').textContent = gameDays.toLocaleString();
      
      document.getElementById('total-cost').textContent = totalCost.toFixed(1);
      
      // í™˜ìœ¨ ì ìš©
      const exchangeRate = getExchangeRate();
      const realMoney = totalCost * (exchangeRate / 10);
      document.getElementById('real-money').textContent = realMoney.toLocaleString();
      
      const monthlyAvg = realDays > 0 ? (realMoney / (realDays / 30)).toFixed(0) : 0;
      document.getElementById('monthly-cost').textContent = parseInt(monthlyAvg).toLocaleString();
      
      // ë¹„ìš© ìƒì„¸ í…Œì´ë¸”
      renderCostTable(costs);
      
      // ë‹¨ê³„ë³„ ë¶„ì„
      renderStageTable(currentIdx, targetIdx, activeSimbeop, yeongakTier, yeongakFreq);
      
      // ì‹¬ë²• ë¶„ì„ í‘œì‹œ
      renderSimbeopAnalysis(currentSimbeop, currentSimbeopMastery, targetSimbeop, targetSimbeopMastery, simbeopMasteryDays, isNewSimbeop);
    }
    
    function updateSimbeopSummary(currentSimbeop, currentMastery, targetSimbeop, targetMastery) {
      const container = document.getElementById('simbeop-summary');
      
      const currentTier = currentSimbeop !== 'ì—†ìŒ' ? SIMBEOP_TIER[currentSimbeop] : { tier: '-', color: '#8b949e' };
      const targetTier = targetSimbeop !== 'ì—†ìŒ' ? SIMBEOP_TIER[targetSimbeop] : { tier: '-', color: '#8b949e' };
      
      const currentRate = currentSimbeop !== 'ì—†ìŒ' ? SIMBEOP_MASTERY_RATE[currentSimbeop] : 0;
      const targetRate = targetSimbeop !== 'ì—†ìŒ' ? SIMBEOP_MASTERY_RATE[targetSimbeop] : 0;
      
      const isChange = currentSimbeop !== targetSimbeop;
      
      container.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="text-align: center; flex: 1;">
            <div style="font-size: 0.7rem; color: #8b949e;">í˜„ì¬</div>
            <div style="color: ${currentTier.color}; font-weight: bold;">${currentSimbeop}</div>
            <div style="font-size: 0.7rem;">${currentMastery}% | ${currentRate}%/íšŒ</div>
          </div>
          <div style="font-size: 1.2rem; color: ${isChange ? '#ffd700' : '#3fb950'}; margin: 0 8px;">
            ${isChange ? 'â†’' : 'â†‘'}
          </div>
          <div style="text-align: center; flex: 1;">
            <div style="font-size: 0.7rem; color: #8b949e;">ëª©í‘œ</div>
            <div style="color: ${targetTier.color}; font-weight: bold;">${targetSimbeop}</div>
            <div style="font-size: 0.7rem;">${targetMastery}% | ${targetRate}%/íšŒ</div>
          </div>
        </div>
      `;
    }
    
    function updateMugongSummary(currentGeomsul, targetGeomsul, geomsulCost, 
                                 currentGwongak, targetGwongak, gwongakCost,
                                 currentBobeop, targetBobeop, bobeopCost) {
      const container = document.getElementById('mugong-summary');
      if (!container) return;
      
      const totalCost = geomsulCost + gwongakCost + bobeopCost;
      
      container.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 0.8rem;">
          <div style="text-align: center; padding: 6px; background: rgba(231,76,60,0.1); border-radius: 4px;">
            <div style="color: #8b949e; font-size: 0.7rem;">ğŸ—¡ï¸ ê²€ìˆ </div>
            <div style="color: #e74c3c;">${currentGeomsul} â†’ ${targetGeomsul}</div>
            <div style="color: #ffd700; font-size: 0.75rem;">${geomsulCost}ëƒ¥</div>
          </div>
          <div style="text-align: center; padding: 6px; background: rgba(52,152,219,0.1); border-radius: 4px;">
            <div style="color: #8b949e; font-size: 0.7rem;">ğŸ‘Š ê¶Œê°ìˆ </div>
            <div style="color: #3498db;">${currentGwongak} â†’ ${targetGwongak}</div>
            <div style="color: #ffd700; font-size: 0.75rem;">${gwongakCost}ëƒ¥</div>
          </div>
          <div style="text-align: center; padding: 6px; background: rgba(46,204,113,0.1); border-radius: 4px;">
            <div style="color: #8b949e; font-size: 0.7rem;">ğŸ¦¶ ë³´ë²•</div>
            <div style="color: #2ecc71;">Lv${currentBobeop} â†’ Lv${targetBobeop}</div>
            <div style="color: #ffd700; font-size: 0.75rem;">${bobeopCost}ëƒ¥</div>
          </div>
        </div>
        <div style="text-align: center; margin-top: 8px; color: #ffd700; font-weight: bold;">
          âš”ï¸ ë¬´ê³µ ì´ ë¹„ìš©: ${totalCost}ëƒ¥
        </div>
      `;
    }
    
    function renderSimbeopAnalysis(currentSimbeop, currentMastery, targetSimbeop, targetMastery, masteryDays, isNewSimbeop) {
      let analysisEl = document.getElementById('simbeop-analysis');
      if (!analysisEl) {
        analysisEl = document.createElement('div');
        analysisEl.id = 'simbeop-analysis';
        analysisEl.className = 'result-card';
        const resultsArea = document.querySelector('.results-area');
        resultsArea.insertBefore(analysisEl, resultsArea.children[2]);
      }
      
      if (targetSimbeop === 'ì—†ìŒ') {
        analysisEl.style.display = 'none';
        return;
      }
      
      analysisEl.style.display = 'block';
      
      const tier = SIMBEOP_TIER[targetSimbeop];
      const rate = SIMBEOP_MASTERY_RATE[targetSimbeop];
      const book = SIMBEOP_BOOK[targetSimbeop];
      
      const startMastery = isNewSimbeop ? 0 : currentMastery;
      const requiredPercent = targetMastery - startMastery;
      const requiredUngi = requiredPercent > 0 ? Math.ceil(requiredPercent / rate) : 0;
      
      const isEvil = book.cost > 0 && book.maxRate <= 7;
      const warningColor = isEvil ? '#f85149' : tier.color;
      
      let html = `
        <h3>ğŸ“œ ì‹¬ë²• ë¶„ì„: ${targetSimbeop}</h3>
        <div style="margin-top: 12px; padding: 12px; background: rgba(${isEvil ? '248,81,73' : '88,166,255'},0.1); border-radius: 8px; border: 1px solid ${warningColor}40;">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem;">
            <div>í‹°ì–´: <span style="color: ${tier.color}; font-weight: bold;">${tier.tier}ê¸‰</span></div>
            <div>ìˆ™ë ¨ ìƒìŠ¹ë¥ : <strong>${rate}%/íšŒ</strong></div>
            <div>ì¶•ê¸°ì†ë„: <strong>${SIMBEOP_SPEED[targetSimbeop]}</strong></div>
            <div>ê¹¨ë‹¬ìŒì±…: <strong>${book.cost > 0 ? book.cost + 'ëƒ¥' : 'ë¬´ë£Œ'}</strong></div>
          </div>
      `;
      
      if (requiredPercent > 0) {
        html += `
          <hr style="border-color: ${warningColor}40; margin: 10px 0;">
          <div style="font-size: 0.85rem;">
            <div>ìˆ™ë ¨ ëª©í‘œ: <strong>${startMastery}% â†’ ${targetMastery}%</strong> (+${requiredPercent}%)</div>
            <div>í•„ìš” ìš´ê¸°: <strong>${requiredUngi}íšŒ</strong> (ê²Œì„ ${requiredUngi}ì¼)</div>
            <div>í˜„ì‹¤ ì†Œìš”: <strong>${Math.ceil(requiredUngi / 3)}ì¼</strong></div>
          </div>
        `;
      }
      
      if (isNewSimbeop && book.cost > 0) {
        const avgRate = (book.minRate + book.maxRate) / 2;
        const masteryStages = Math.ceil(targetMastery / 100);
        const booksPerStage = Math.ceil(100 / avgRate);
        const totalBooks = booksPerStage * masteryStages;
        const totalBookCost = totalBooks * book.cost;
        const exchangeRate = getExchangeRate();
        
        html += `
          <hr style="border-color: ${warningColor}40; margin: 10px 0;">
          <div style="color: ${warningColor}; font-size: 0.85rem;">
            ğŸ’° ì‹¬ë²• ìŠµë“ ë¹„ìš©: <strong>${totalBookCost}ëƒ¥</strong> (${(totalBookCost * exchangeRate / 10).toLocaleString()}ì›)
            <br><span style="font-size: 0.75rem;">ê¹¨ë‹¬ìŒì±… ${totalBooks}íšŒ Ã— ${book.cost}ëƒ¥ (${book.minRate}~${book.maxRate}%)</span>
          </div>
        `;
        
        if (isEvil) {
          html += `<div style="margin-top: 6px; color: #f85149; font-size: 0.75rem;">â€» ${book.minRate}~${book.maxRate}% íšë“ë¥ ... ì•…ë„í•©ë‹ˆë‹¤ ğŸ’€</div>`;
        }
      }
      
      html += `</div>`;
      analysisEl.innerHTML = html;
    }
    
    function renderPath(currentIdx, targetIdx) {
      const container = document.getElementById('path-display');
      let html = '';
      
      for (let i = currentIdx; i <= targetIdx; i++) {
        const g = GYEONGJI_ORDER[i];
        let nodeClass = '';
        if (i === currentIdx) nodeClass = 'current';
        else if (i === targetIdx) nodeClass = 'target';
        
        html += `<span class="path-node ${nodeClass}">${g}</span>`;
        if (i < targetIdx) {
          html += '<span class="path-arrow">â†’</span>';
        }
      }
      
      container.innerHTML = html;
    }
    
    function renderCostTable(costs) {
      const tbody = document.querySelector('#cost-detail tbody');
      let html = '';
      let total = 0;
      
      costs.forEach(item => {
        const noteHtml = item.note ? `<br><span class="sub">${item.note}</span>` : '';
        const subtotalClass = item.subtotal < 0 ? 'style="color: #3fb950;"' : 'class="highlight"';
        html += `
          <tr>
            <td>${item.name}${noteHtml}</td>
            <td>${item.qty}</td>
            <td>${item.unit}ëƒ¥</td>
            <td ${subtotalClass}>${item.subtotal.toFixed(1)}ëƒ¥</td>
          </tr>
        `;
        total += item.subtotal;
      });
      
      html += `
        <tr style="background: rgba(255,215,0,0.1);">
          <td colspan="3"><strong>í•©ê³„</strong></td>
          <td class="highlight"><strong>${total.toFixed(1)}ëƒ¥</strong></td>
        </tr>
      `;
      
      tbody.innerHTML = html;
    }
    
    function renderSimbeopWarning(simbeop, masteryTarget) {
      const book = SIMBEOP_BOOK[simbeop];
      const masteryStages = SIMBEOP_MASTERY[simbeop];
      
      // ê²°ê³¼ ì¹´ë“œ ì˜ì—­ì— ê²½ê³  ì¶”ê°€
      let warningEl = document.getElementById('simbeop-warning');
      if (!warningEl) {
        warningEl = document.createElement('div');
        warningEl.id = 'simbeop-warning';
        warningEl.className = 'result-card';
        const resultsArea = document.querySelector('.results-area');
        resultsArea.insertBefore(warningEl, resultsArea.children[2]);
      }
      
      if (masteryStages <= 1 || book.cost === 0) {
        warningEl.style.display = 'none';
        return;
      }
      
      warningEl.style.display = 'block';
      const avgRate = (book.minRate + book.maxRate) / 2;
      const booksPerStage = Math.ceil(100 / avgRate);
      const totalBooks = booksPerStage * masteryTarget;
      const totalBookCost = totalBooks * book.cost;
      
      const isEvil = book.maxRate <= 7;
      const warningColor = isEvil ? '#f85149' : '#ffd700';
      const warningIcon = isEvil ? 'ğŸ’€' : 'âš ï¸';
      
      warningEl.innerHTML = `
        <h3>${warningIcon} ì‹¬ë²• ì™„ìˆ™ ë¹„ìš© ë¶„ì„</h3>
        <div style="margin-top: 12px; padding: 12px; background: rgba(${isEvil ? '248,81,73' : '255,215,0'},0.1); border-radius: 8px; border: 1px solid ${warningColor}40;">
          <div style="color: ${warningColor}; font-weight: bold; margin-bottom: 8px;">
            ${simbeop} ${['', 'ì…ë¬¸', 'ëŠ¥ìˆ™', 'ì™„ìˆ™'][masteryTarget]}ê¹Œì§€
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 0.85rem;">
            <div>ê¹¨ë‹¬ìŒì˜ ì±… ë‹¨ê°€: <strong>${book.cost}ëƒ¥</strong></div>
            <div>íšë“ë¥ : <strong>${book.minRate}~${book.maxRate}%</strong></div>
            <div>ë‹¨ê³„ë‹¹ í•„ìš”: <strong>~${booksPerStage}íšŒ</strong></div>
            <div>ì´ í•„ìš”: <strong>${totalBooks}íšŒ</strong></div>
          </div>
          <div style="margin-top: 10px; font-size: 1.1rem; color: ${warningColor}; font-weight: bold;">
            ğŸ’° ì‹¬ë²•ë§Œ ${totalBookCost}ëƒ¥ (í˜„ê¸ˆ ${(totalBookCost * (getExchangeRate() / 10)).toLocaleString()}ì›)
          </div>
          ${isEvil ? '<div style="margin-top: 8px; color: #f85149; font-size: 0.8rem;">â€» 3~7% íšë“ë¥ ... ì§„ì‹¬ ì•…ë„í•©ë‹ˆë‹¤ ã…‹ã…‹ã…‹</div>' : ''}
        </div>
      `;
    }
    
    function renderStageTable(currentIdx, targetIdx, simbeop, yeongakTier, yeongakFreq) {
      const tbody = document.querySelector('#stage-detail tbody');
      let html = '';
      
      const chukgiSpeed = SIMBEOP_SPEED[simbeop];
      const yeongak = YEONGAK[yeongakTier];
      
      for (let i = currentIdx + 1; i <= targetIdx; i++) {
        const g = GYEONGJI_ORDER[i];
        const prevG = GYEONGJI_ORDER[i - 1];
        
        const neigongNeeded = GYEONGJI_NEIGONG[g] - GYEONGJI_NEIGONG[prevG];
        const simdeuk = SIMDEUK_REQUIRED[g];
        
        // ê°„ë‹¨í•œ ê¸°ê°„ ì¶”ì •
        const gameDays = Math.ceil(neigongNeeded / (chukgiSpeed / 10) * 365);
        const realDays = Math.ceil(gameDays / 3);
        
        // ë¹„ìš© ì¶”ì •
        let stageCost = MUGONG_COST[g];
        if (simdeuk.count > 0) {
          const avgAttempts = Math.ceil(100 / 15) * simdeuk.count;
          stageCost += avgAttempts * SIMDEUK_COST[g];
        }
        
        const simdeukText = simdeuk.count > 0 ? `100% Ã— ${simdeuk.count}` : '-';
        
        html += `
          <tr>
            <td><strong>${prevG} â†’ ${g}</strong></td>
            <td>${neigongNeeded}ë…„</td>
            <td>${simdeukText}</td>
            <td>${realDays}ì¼ <span class="sub">(${Math.ceil(realDays/30)}ê°œì›”)</span></td>
            <td class="highlight">${stageCost}ëƒ¥</td>
          </tr>
        `;
      }
      
      tbody.innerHTML = html;
    }
    
    // ì´ˆê¸° ê³„ì‚°
    calculate();
    updateMasteryOptions();
    
    // ì‹¬ë²• ë³€ê²½ ì‹œ ìˆ™ë ¨ë„ ì„ íƒì§€ ì—…ë°ì´íŠ¸
    document.getElementById('current-simbeop').addEventListener('change', updateMasteryOptions);
    document.getElementById('target-simbeop').addEventListener('change', updateMasteryOptions);
    
    // ë¬´ê³µ ë³€ê²½ ì‹œ ì¬ê³„ì‚°
    document.getElementById('current-geomsul').addEventListener('change', calculate);
    document.getElementById('target-geomsul').addEventListener('change', calculate);
    document.getElementById('current-gwongak').addEventListener('change', calculate);
    document.getElementById('target-gwongak').addEventListener('change', calculate);
    document.getElementById('current-bobeop').addEventListener('change', calculate);
    document.getElementById('target-bobeop').addEventListener('change', calculate);
    
    function updateMasteryOptions() {
      const currentSimbeop = document.getElementById('current-simbeop').value;
      const targetSimbeopRaw = document.getElementById('target-simbeop').value;
      const targetSimbeop = targetSimbeopRaw === 'í˜„ì¬ìœ ì§€' ? currentSimbeop : targetSimbeopRaw;
      
      // í˜„ì¬ ì‹¬ë²• ìˆ™ë ¨ë„ ì˜µì…˜ ì œí•œ
      if (currentSimbeop !== 'ì—†ìŒ') {
        const currentMax = SIMBEOP_MASTERY[currentSimbeop] || 1;
        filterMasterySelect('current-simbeop-mastery', currentMax);
      }
      
      // ëª©í‘œ ì‹¬ë²• ìˆ™ë ¨ë„ ì˜µì…˜ ì œí•œ
      if (targetSimbeop !== 'ì—†ìŒ') {
        const targetMax = SIMBEOP_MASTERY[targetSimbeop] || 1;
        filterMasterySelect('target-simbeop-mastery', targetMax);
      }
      
      calculate();
    }
    
    function filterMasterySelect(selectId, maxStages) {
      const select = document.getElementById(selectId);
      const currentValue = parseInt(select.value);
      
      Array.from(select.options).forEach(option => {
        const optionValue = parseInt(option.value);
        if (optionValue > maxStages * 100) {
          option.style.display = 'none';
        } else {
          option.style.display = '';
        }
      });
      
      // í˜„ì¬ ì„ íƒê°’ì´ ìµœëŒ€ì¹˜ë¥¼ ë„˜ìœ¼ë©´ ìµœëŒ€ì¹˜ë¡œ ì¡°ì •
      if (currentValue > maxStages * 100) {
        select.value = maxStages * 100;
      }
    }
    
    // í™˜ìœ¨ ì„ íƒ ì´ë²¤íŠ¸
    document.getElementById('exchange-rate').addEventListener('change', function() {
      const customInput = document.getElementById('custom-rate');
      if (this.value === 'custom') {
        customInput.style.display = 'block';
      } else {
        customInput.style.display = 'none';
      }
      updateRateDisplay();
      calculate();
    });
    
    document.getElementById('custom-rate').addEventListener('input', function() {
      updateRateDisplay();
      calculate();
    });
    
    function updateRateDisplay() {
      const rate = getExchangeRate();
      const perNyang = rate / 10;
      document.getElementById('rate-per-nyang').textContent = perNyang.toLocaleString();
    }
    
    function getExchangeRate() {
      const select = document.getElementById('exchange-rate');
      if (select.value === 'custom') {
        return parseInt(document.getElementById('custom-rate').value) || 10000;
      }
      return parseInt(select.value);
    }
  </script>
</body>
</html>
